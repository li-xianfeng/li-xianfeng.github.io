---
layout: post
title: 正则表达式
tags: [Others]
image: https://li-xianfeng.github.io/public/img/hyde.jpg
---
### 字符区间
* 首尾字符可以是ASCII字符表里的任意字符。实际常用的是数字区间和字母区间。
可以是任何两个用[a-z],[0-9]。
* 字符区间可连用。[A-Za-z0-9]。

### 常用元字符：
* 空白字符：
  + \f 换页符
  + \n 换行符
  + \r 回车符
  + \t 制表符
  + \r\n匹配回车+换行，windows将此作为问本行的结束标签（实际mac也兼容），所以使用\r\n\r\n匹配两个连续的行尾标签，即两行记录之间的空白行（Linux下使用\n\n）。
* \d数字， \D非数字。
* \w匹配数字或字母或下划线， \W 取非。
* \s匹配任意空白字符，等价于[\f\n\r\t\v]。
* \0打头8进制，\x打头16进制。

### 重复匹配：
* +匹配1到多次。
* 匹配0到多次。
* ?前面的字符可选（0次或1次）。
* {n}, {n,m}, {n,} 匹配n次，n到m次，n次以上。
* 正则默认贪婪匹配，启用懒惰型匹配用?如： *?，+?, {n,  }?

### 位置匹配：
* \b单词边界；（\w和\W之间）\B取非。
* 字符串边界；^开始，$结尾。
* 分行匹配模式：在表达式最前面加上 (?m), 如(?m)^\s*//.*$ 匹配多行代码中的注释，不加(?m)则只能匹配第一行的注释。

### 子表达式：
* ()中的表达式部分为一个子表达式，后面的重复匹配符将作用于整个子表达式。 
* ｜运算符是把前后两部分视作两个整体，经与()结合使用，如(abc|def)gh。

### 回溯引用匹配：
* 前后一致： <\[Hh\]([1-6])>.*?<[Hh]\1>，匹配\<h1>到\<h6>的html标题文本； \1引用第一个子表达式([1-6])匹配到的数字。
2. 替换，js中replace第二个参数（函数）的第二个及以后参数分别引用第1，2…个子表达式匹配到的字符串。第一个参数为字符串本身。不可使用大小写转换元字符。
3. 在编辑器中替换功能：$1,$2...分别对应各子表达式匹配到的字符串。可使用大小写转换元字符。

### 大小写转换元字符：
* \E 结束\L或\U转换
* \l 把下一个字符转换为小写
* \L 把\L到\E之间的字符全部转换为小写
* \u 把下一个字符转换为大写
* \U 把\U到\E之间的字符全部转换为大写

### 前后查找：
对某一位置的前后进行查找，匹配结果不包含该位置。

* 向前查找?=，如 .*?(?=:) 匹配匹配url中的协议，不包含:。
2. 向后查找?<=, 如(?<=¥)[0-9\.]+匹配¥开头的价格，不含¥。 javascript不支持，
3. 向前查找模式长度可变，向后查找模式长度固定，即?<=所在的子表达式中不可包含+*{n}等重复匹配标志。
4. 负向前查找， ?!,  如^(?!abc)匹配不以abc开头。
5. 负向后查找， ?<!, 如(?<!abc)$匹配不以abc结尾。
